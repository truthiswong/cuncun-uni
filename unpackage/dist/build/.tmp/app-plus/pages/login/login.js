(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"49cb":function(t,e,n){"use strict";n.r(e);var a=n("d021"),o=n("730f");for(var u in o)"default"!==u&&function(t){n.d(e,t,function(){return o[t]})}(u);n("f6fa");var i,r=n("f0c5"),d=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"89408ece",null,!1,a["a"],i);e["default"]=d.exports},"730f":function(t,e,n){"use strict";n.r(e);var a=n("b7b7"),o=n.n(a);for(var u in a)"default"!==u&&function(t){n.d(e,t,function(){return a[t]})}(u);e["default"]=o.a},ab9d:function(t,e,n){},b7b7:function(t,e,n){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("f691")),u=i(n("b5ea"));i(n("eb61"));function i(t){return t&&t.__esModule?t:{default:t}}var r={components:{},data:function(){return{inputValue:"",loading:!1,username:"",sms:"",smsText:"发送验证码",agreement:!1,buttonActive:!1,disabled:!1,redirect:encodeURIComponent("/pages/tabs/tab1")}},onLoad:function(e){o.default.debug&&t("log","onLoad",e," at pages/login/login.vue:58"),e.redirect&&(this.redirect=e.redirect)},onShow:function(){var t=u.default.getToken();if(t){var e=decodeURIComponent(this.redirect);e.indexOf("?")>-1?a.redirectTo({url:e}):a.switchTab({url:e})}},methods:{onKeyInput:function(t){this.inputValue=t.target.value},toReg:function(){a.navigateTo({url:"/pages/reg/reg?redirect="+this.redirect})},getSms:function(){var t=this;this.disabled=!0;var e=30;this.smsText=e,this.timer=setInterval(function(){e--,e>=0?t.smsText=e:(clearInterval(t.timer),t.smsText="再次获取",t.disabled=!1)},1e3)},login:function(){a.switchTab({url:"/pages/tabs/tab1"})},findPassword:function(t){a.showModal({title:"温馨提示",content:"目前BookChat暂不支持找回密码的功能，如果忘记了密码，请打开书栈网(https://www.bookstack.cn)将密码找回"})},formSubmit:function(e){var n=this;o.default.debug&&t("log","formSubmit",e," at pages/login/login.vue:131"),n.loading||(""!=e.detail.value.password&&""!=e.detail.value.username?(n.loading=!0,u.default.request(o.default.api.login,e.detail.value,"POST").then(function(e){o.default.debug&&t("log",o.default.api.login,e," at pages/login/login.vue:142");var i=e.data.user;if(void 0==i||i.uid<=0||""==i.token)return u.default.toastError("登录失败：未知错误"),void(n.loading=!1);u.default.setUser(i),u.default.toastSuccess("登录成功"),setTimeout(function(){var t=decodeURIComponent(n.redirect);t.indexOf("?")>-1?a.redirectTo({url:t}):a.switchTab({url:t})},1500)}).catch(function(e){o.default.debug&&t("log",e," at pages/login/login.vue:164"),n.loading=!1,u.default.toastError(e.data.message||e.errMsg)})):u.default.toastError("账号和密码均不能为空"))}}};e.default=r}).call(this,n("0de9")["default"],n("6e42")["default"])},d021:function(t,e,n){"use strict";var a,o=function(){var t=this,e=t.$createElement;t._self._c},u=[];n.d(e,"b",function(){return o}),n.d(e,"c",function(){return u}),n.d(e,"a",function(){return a})},db69:function(t,e,n){"use strict";(function(t){n("0007"),n("921b");a(n("66fd"));var e=a(n("49cb"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},f6fa:function(t,e,n){"use strict";var a=n("ab9d"),o=n.n(a);o.a}},[["db69","common/runtime","common/vendor"]]]);