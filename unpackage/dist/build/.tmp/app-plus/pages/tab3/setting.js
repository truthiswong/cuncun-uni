(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tab3/setting"],{"0880":function(n,t,e){"use strict";var a={"uni-nav-bar":()=>e.e("components/uni-nav-bar/uni-nav-bar").then(e.bind(null,"a5f2")),"uni-list":()=>e.e("components/uni-list/uni-list").then(e.bind(null,"cb59")),"uni-list-item":()=>e.e("components/uni-list-item/uni-list-item").then(e.bind(null,"a055")),"uni-popup":()=>e.e("components/uni-popup/uni-popup").then(e.bind(null,"1947"))},o=function(){var n=this,t=n.$createElement;n._self._c},i=[];e.d(t,"b",(function(){return o})),e.d(t,"c",(function(){return i})),e.d(t,"a",(function(){return a}))},"1a63":function(n,t,e){"use strict";e.r(t);var a=e("0880"),o=e("447a");for(var i in o)"default"!==i&&function(n){e.d(t,n,(function(){return o[n]}))}(i);e("65e5");var c,u=e("f0c5"),s=Object(u["a"])(o["default"],a["b"],a["c"],!1,null,"1d3ad0b4",null,!1,a["a"],c);t["default"]=s.exports},"447a":function(n,t,e){"use strict";e.r(t);var a=e("d73d"),o=e.n(a);for(var i in a)"default"!==i&&function(n){e.d(t,n,(function(){return a[n]}))}(i);t["default"]=o.a},"60e0":function(n,t,e){},"65e5":function(n,t,e){"use strict";var a=e("60e0"),o=e.n(a);o.a},d73d:function(n,t,e){"use strict";(function(n,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={components:{},data:function(){return{headImage:e("855d"),nickname:"Ding Han",nicknameSet:""}},onLoad:function(){var t=n.getStorageSync("user");t.nickname&&(this.nickname=t.nickname),this.getUserInfo()},methods:{onClickBack:function(){n.navigateBack({delta:1})},chooseHeadImage:function(){var t=this;n.chooseImage({count:1,success:function(e){var o=e.tempFilePaths;t.headImage=o[0],a("log",o," at pages/tab3/setting.vue:78"),n.uploadFile({url:"http://cuncun.app.iisu.cn/server/data/user/upload/portrait",filePath:o[0],header:{"Content-Type":"application/x-www-form-urlencoded","X-TENANT-ID":"cuncun:cc@2020",Authorization:n.getStorageSync("token")},name:"portrait",success:function(n){a("log",n.data," at pages/tab3/setting.vue:93")},fail:function(){}})}})},onNick:function(){this.$refs.nick.open()},buttonCancel:function(){this.$refs.nick.close()},buttonConfirm:function(){var t=this;this.nicknameSet?n.request({url:"http://cuncun.app.iisu.cn/server/data/user/set/nickname",data:{name:this.nicknameSet},method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded","X-TENANT-ID":"cuncun:cc@2020",Authorization:n.getStorageSync("token")},success:function(e){var o=e.data;if(a("log",o," at pages/tab3/setting.vue:156"),o.success){n.showToast({icon:"none",title:"昵称修改成功"}),t.nickname=t.nicknameSet;try{var i=n.getStorageSync("user");i&&(i.nickname=t.nickname,n.setStorage({key:"user",data:i}),a("log",i," at pages/tab3/setting.vue:171")),a("log","1111"," at pages/tab3/setting.vue:173")}catch(c){a("log","22222"," at pages/tab3/setting.vue:175")}t.$refs.nick.close()}else n.showToast({icon:"none",title:o.message})}}):n.showToast({icon:"none",title:"昵称不能为空"})},getUserInfo:function(){n.request({url:"http://cuncun.app.iisu.cn/server/data/user/current",method:"GET",header:{"Content-Type":"application/x-www-form-urlencoded","X-TENANT-ID":"cuncun:cc@2020",Authorization:n.getStorageSync("token")},success:function(t){var e=t.data;a("log",e," at pages/tab3/setting.vue:199"),e.success?a("log",e.data," at pages/tab3/setting.vue:201"):n.showToast({icon:"none",title:e.message})}})},onAddress:function(){this.$router.push({path:"/address"})},onLogout:function(){n.showModal({title:"提示",content:"注销账号后，该账号里所有数据将被清空。",success:function(t){t.confirm&&n.toastSuccess("退出成功")}})},onExit:function(){n.showModal({title:"提示",content:"您确定要退出登录吗？",success:function(t){t.confirm&&(n.navigateTo({url:"/pages/login/login"}),n.showToast({title:"退出成功",icon:"none"}))}})}}};t.default=o}).call(this,e("6e42")["default"],e("0de9")["default"])},ede3:function(n,t,e){"use strict";(function(n){e("0007"),e("921b");a(e("66fd"));var t=a(e("1a63"));function a(n){return n&&n.__esModule?n:{default:n}}n(t.default)}).call(this,e("6e42")["createPage"])}},[["ede3","common/runtime","common/vendor"]]]);