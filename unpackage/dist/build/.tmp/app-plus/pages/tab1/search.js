(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tab1/search"],{1361:function(t,e,a){"use strict";a.r(e);var n=a("1b92"),i=a("f2c4");for(var u in i)"default"!==u&&function(t){a.d(e,t,function(){return i[t]})}(u);a("d9fe");var s,c=a("f0c5"),o=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,"579575c0",null,!1,n["a"],s);e["default"]=o.exports},"1b92":function(t,e,a){"use strict";var n={"uni-nav-bar":()=>a.e("components/uni-nav-bar/uni-nav-bar").then(a.bind(null,"a5f2"))},i=function(){var t=this,e=t.$createElement;t._self._c},u=[];a.d(e,"b",function(){return i}),a.d(e,"c",function(){return u}),a.d(e,"a",function(){return n})},"80d7":function(t,e,a){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;s(a("eb61"));var i=s(a("b5ea")),u=s(a("f691"));function s(t){return t&&t.__esModule?t:{default:t}}var c=function(){return a.e("components/loading").then(a.bind(null,"8bed"))},o=function(){return a.e("components/search").then(a.bind(null,"cda8"))},l=function(){return a.e("components/tab").then(a.bind(null,"bb7d"))},d={components:{loading:c,search:o,tab:l},data:function(){return{tips:"",lists:[],wd:"",title:"搜索",page:1,size:10,tabValue:"book",showTab:!1,focus:!1,loading:!1,tabs:[{title:"书籍",value:"book"},{title:"文档",value:"doc"}]}},onLoad:function(e){u.default.debug&&t("log","search",e," at pages/tab1/search.vue:55");var a=e.wd||"";""!=a?(this.wd=a,this.showTab=!0,this.execSearch()):this.focus=!0},onReachBottom:function(){this.execSearch()},methods:{onClickBack:function(){n.navigateBack({delta:1})},tabClick:function(e){u.default.debug&&t("log","tabClick:",e," at pages/tab1/search.vue:75"),e.value!=this.tabValue&&(this.tabValue=e.value,this.page=1,this.lists=[],this.showTab=!0,this.execSearch())},search:function(e){u.default.debug&&t("log",e," at pages/tab1/search.vue:86"),this.wd=e.wd,this.page=1,this.lists=[],this.showTab=!0,this.execSearch()},clear:function(){this.wd="",n.setNavigationBarTitle({title:"搜索"}),this.showTab=!1,this.lists=[],this.loading=!1,this.tips="",this.focus=!0,this.tabValue="book"},execSearch:function(){var e=this,a=u.default.api.searchDoc;if(e.showTab=!0,e.title=e.wd+" · 搜索",!e.pedding){if(0==e.page)return e.loading=!1,e.tips="没有找到更多资源...",void(e.pedding=!1);e.loading=!0,e.pending=!0,"doc"!=e.tabValue&&(a=u.default.api.searchBook),i.default.request(a,{wd:e.wd,page:e.page,size:e.size}).then(function(a){u.default.debug&&t("log",u.default.api.searchBook,a," at pages/tab1/search.vue:137");var n=e.page+1,s=[];a.data&&a.data.result?(s=a.data.result,a.data.result.length<e.size&&(n=0)):n=0,"doc"==e.tabValue&&(s=s.map(function(t){return t.created_at=i.default.relativeTime(t.created_at),t.vcnt=i.default.fixView(t.vcnt),t})),e.page=n,e.lists=e.lists.concat(s),e.loading=n>0,e.tips="没有找到更多资源..."}).catch(function(a){u.default.debug&&t("log",a," at pages/tab1/search.vue:160"),e.loading=!1,e.tips=a.data.message||a.errMsg,e.page=0}).finally(function(){e.pending=!1})}}}};e.default=d}).call(this,a("0de9")["default"],a("6e42")["default"])},c750:function(t,e,a){},d9fe:function(t,e,a){"use strict";var n=a("c750"),i=a.n(n);i.a},f2c4:function(t,e,a){"use strict";a.r(e);var n=a("80d7"),i=a.n(n);for(var u in n)"default"!==u&&function(t){a.d(e,t,function(){return n[t]})}(u);e["default"]=i.a},fe48:function(t,e,a){"use strict";(function(t){a("0007"),a("921b");n(a("66fd"));var e=n(a("1361"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])}},[["fe48","common/runtime","common/vendor"]]]);